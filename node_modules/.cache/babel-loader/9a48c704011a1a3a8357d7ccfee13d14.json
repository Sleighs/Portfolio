{"ast":null,"code":"function _iterableToArrayLimit(arr, i) {\n  var _i = null == arr ? null : \"undefined\" != typeof Symbol && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (null != _i) {\n    var _s,\n        _e,\n        _x,\n        _r,\n        _arr = [],\n        _n = !0,\n        _d = !1;\n\n    try {\n      if (_x = (_i = _i.call(arr)).next, 0 === i) {\n        if (Object(_i) !== _i) return;\n        _n = !1;\n      } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0);\n    } catch (err) {\n      _d = !0, _e = err;\n    } finally {\n      try {\n        if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r)) return;\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n  return arr2;\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _toPrimitive(input, hint) {\n  if (typeof input !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (typeof res !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n\n  return (hint === \"string\" ? String : Number)(input);\n}\n\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n\n  return typeof key === \"symbol\" ? key : String(key);\n}\n\nvar index = function () {\n  var list = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var keyAccessors = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var multiItem = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n  var flattenKeys = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  var keys = (keyAccessors instanceof Array ? keyAccessors.length ? keyAccessors : [undefined] : [keyAccessors]).map(function (key) {\n    return {\n      keyAccessor: key,\n      isProp: !(key instanceof Function)\n    };\n  });\n  var indexedResult = list.reduce(function (res, item) {\n    var iterObj = res;\n    var itemVal = item;\n    keys.forEach(function (_ref, idx) {\n      var keyAccessor = _ref.keyAccessor,\n          isProp = _ref.isProp;\n      var key;\n\n      if (isProp) {\n        var _itemVal = itemVal,\n            propVal = _itemVal[keyAccessor],\n            rest = _objectWithoutProperties(_itemVal, [keyAccessor].map(_toPropertyKey));\n\n        key = propVal;\n        itemVal = rest;\n      } else {\n        key = keyAccessor(itemVal, idx);\n      }\n\n      if (idx + 1 < keys.length) {\n        if (!iterObj.hasOwnProperty(key)) {\n          iterObj[key] = {};\n        }\n\n        iterObj = iterObj[key];\n      } else {\n        // Leaf key\n        if (multiItem) {\n          if (!iterObj.hasOwnProperty(key)) {\n            iterObj[key] = [];\n          }\n\n          iterObj[key].push(itemVal);\n        } else {\n          iterObj[key] = itemVal;\n        }\n      }\n    });\n    return res;\n  }, {});\n\n  if (multiItem instanceof Function) {\n    // Reduce leaf multiple values\n    (function reduce(node) {\n      var level = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n\n      if (level === keys.length) {\n        Object.keys(node).forEach(function (k) {\n          return node[k] = multiItem(node[k]);\n        });\n      } else {\n        Object.values(node).forEach(function (child) {\n          return reduce(child, level + 1);\n        });\n      }\n    })(indexedResult); // IIFE\n\n  }\n\n  var result = indexedResult;\n\n  if (flattenKeys) {\n    // flatten into array\n    result = [];\n\n    (function flatten(node) {\n      var accKeys = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n      if (accKeys.length === keys.length) {\n        result.push({\n          keys: accKeys,\n          vals: node\n        });\n      } else {\n        Object.entries(node).forEach(function (_ref2) {\n          var _ref3 = _slicedToArray(_ref2, 2),\n              key = _ref3[0],\n              val = _ref3[1];\n\n          return flatten(val, [].concat(_toConsumableArray(accKeys), [key]));\n        });\n      }\n    })(indexedResult); //IIFE\n\n\n    if (keyAccessors instanceof Array && keyAccessors.length === 0 && result.length === 1) {\n      // clear keys if there's no key accessors (single result)\n      result[0].keys = [];\n    }\n  }\n\n  return result;\n};\n\nexport { index as default };","map":{"version":3,"sources":["/Users/samuelwright/Projects/portfolio/node_modules/index-array-by/dist/index-array-by.mjs"],"names":["_iterableToArrayLimit","arr","i","_i","Symbol","iterator","_s","_e","_x","_r","_arr","_n","_d","call","next","Object","done","push","value","length","err","return","_objectWithoutPropertiesLoose","source","excluded","target","sourceKeys","keys","key","indexOf","_objectWithoutProperties","getOwnPropertySymbols","sourceSymbolKeys","prototype","propertyIsEnumerable","_slicedToArray","_arrayWithHoles","_unsupportedIterableToArray","_nonIterableRest","_toConsumableArray","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","Array","isArray","_arrayLikeToArray","iter","from","o","minLen","n","toString","slice","constructor","name","test","len","arr2","TypeError","_toPrimitive","input","hint","prim","toPrimitive","undefined","res","String","Number","_toPropertyKey","arg","index","list","arguments","keyAccessors","multiItem","flattenKeys","map","keyAccessor","isProp","Function","indexedResult","reduce","item","iterObj","itemVal","forEach","_ref","idx","_itemVal","propVal","rest","hasOwnProperty","node","level","k","values","child","result","flatten","accKeys","vals","entries","_ref2","_ref3","val","concat","default"],"mappings":"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","sourcesContent":["function _iterableToArrayLimit(arr, i) {\n  var _i = null == arr ? null : \"undefined\" != typeof Symbol && arr[Symbol.iterator] || arr[\"@@iterator\"];\n  if (null != _i) {\n    var _s,\n      _e,\n      _x,\n      _r,\n      _arr = [],\n      _n = !0,\n      _d = !1;\n    try {\n      if (_x = (_i = _i.call(arr)).next, 0 === i) {\n        if (Object(_i) !== _i) return;\n        _n = !1;\n      } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0);\n    } catch (err) {\n      _d = !0, _e = err;\n    } finally {\n      try {\n        if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r)) return;\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n    return _arr;\n  }\n}\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n  return target;\n}\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _toPrimitive(input, hint) {\n  if (typeof input !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (typeof res !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n  return typeof key === \"symbol\" ? key : String(key);\n}\n\nvar index = (function () {\n  var list = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var keyAccessors = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var multiItem = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n  var flattenKeys = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  var keys = (keyAccessors instanceof Array ? keyAccessors.length ? keyAccessors : [undefined] : [keyAccessors]).map(function (key) {\n    return {\n      keyAccessor: key,\n      isProp: !(key instanceof Function)\n    };\n  });\n  var indexedResult = list.reduce(function (res, item) {\n    var iterObj = res;\n    var itemVal = item;\n    keys.forEach(function (_ref, idx) {\n      var keyAccessor = _ref.keyAccessor,\n        isProp = _ref.isProp;\n      var key;\n      if (isProp) {\n        var _itemVal = itemVal,\n          propVal = _itemVal[keyAccessor],\n          rest = _objectWithoutProperties(_itemVal, [keyAccessor].map(_toPropertyKey));\n        key = propVal;\n        itemVal = rest;\n      } else {\n        key = keyAccessor(itemVal, idx);\n      }\n      if (idx + 1 < keys.length) {\n        if (!iterObj.hasOwnProperty(key)) {\n          iterObj[key] = {};\n        }\n        iterObj = iterObj[key];\n      } else {\n        // Leaf key\n        if (multiItem) {\n          if (!iterObj.hasOwnProperty(key)) {\n            iterObj[key] = [];\n          }\n          iterObj[key].push(itemVal);\n        } else {\n          iterObj[key] = itemVal;\n        }\n      }\n    });\n    return res;\n  }, {});\n  if (multiItem instanceof Function) {\n    // Reduce leaf multiple values\n    (function reduce(node) {\n      var level = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n      if (level === keys.length) {\n        Object.keys(node).forEach(function (k) {\n          return node[k] = multiItem(node[k]);\n        });\n      } else {\n        Object.values(node).forEach(function (child) {\n          return reduce(child, level + 1);\n        });\n      }\n    })(indexedResult); // IIFE\n  }\n\n  var result = indexedResult;\n  if (flattenKeys) {\n    // flatten into array\n    result = [];\n    (function flatten(node) {\n      var accKeys = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n      if (accKeys.length === keys.length) {\n        result.push({\n          keys: accKeys,\n          vals: node\n        });\n      } else {\n        Object.entries(node).forEach(function (_ref2) {\n          var _ref3 = _slicedToArray(_ref2, 2),\n            key = _ref3[0],\n            val = _ref3[1];\n          return flatten(val, [].concat(_toConsumableArray(accKeys), [key]));\n        });\n      }\n    })(indexedResult); //IIFE\n\n    if (keyAccessors instanceof Array && keyAccessors.length === 0 && result.length === 1) {\n      // clear keys if there's no key accessors (single result)\n      result[0].keys = [];\n    }\n  }\n  return result;\n});\n\nexport { index as default };\n"]},"metadata":{},"sourceType":"module"}