{"ast":null,"code":"import indexBy from 'index-array-by';\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _i = null == arr ? null : \"undefined\" != typeof Symbol && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (null != _i) {\n    var _s,\n        _e,\n        _x,\n        _r,\n        _arr = [],\n        _n = !0,\n        _d = !1;\n\n    try {\n      if (_x = (_i = _i.call(arr)).next, 0 === i) {\n        if (Object(_i) !== _i) return;\n        _n = !1;\n      } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0);\n    } catch (err) {\n      _d = !0, _e = err;\n    } finally {\n      try {\n        if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r)) return;\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  key = _toPropertyKey(key);\n\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n  return arr2;\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _toPrimitive(input, hint) {\n  if (typeof input !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (typeof res !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n\n  return (hint === \"string\" ? String : Number)(input);\n}\n\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n\n  return typeof key === \"symbol\" ? key : String(key);\n}\n\nvar _excluded = [\"createObj\", \"updateObj\", \"exitObj\", \"objBindAttr\", \"dataBindAttr\"];\n\nfunction diffArrays(prev, next, idAccessor) {\n  var result = {\n    enter: [],\n    update: [],\n    exit: []\n  };\n\n  if (!idAccessor) {\n    // use object references for comparison\n    var prevSet = new Set(prev);\n    var nextSet = new Set(next);\n    new Set([].concat(_toConsumableArray(prevSet), _toConsumableArray(nextSet))).forEach(function (item) {\n      var type = !prevSet.has(item) ? 'enter' : !nextSet.has(item) ? 'exit' : 'update';\n      result[type].push(type === 'update' ? [item, item] : item);\n    });\n  } else {\n    // compare by id (duplicate keys are ignored)\n    var prevById = indexBy(prev, idAccessor, false);\n    var nextById = indexBy(next, idAccessor, false);\n    var byId = Object.assign({}, prevById, nextById);\n    Object.entries(byId).forEach(function (_ref) {\n      var _ref2 = _slicedToArray(_ref, 2),\n          id = _ref2[0],\n          item = _ref2[1];\n\n      var type = !prevById.hasOwnProperty(id) ? 'enter' : !nextById.hasOwnProperty(id) ? 'exit' : 'update';\n      result[type].push(type === 'update' ? [prevById[id], nextById[id]] : item);\n    });\n  }\n\n  return result;\n}\n\nfunction dataBindDiff(data, existingObjs, _ref3) {\n  var _ref3$objBindAttr = _ref3.objBindAttr,\n      objBindAttr = _ref3$objBindAttr === void 0 ? '__obj' : _ref3$objBindAttr,\n      _ref3$dataBindAttr = _ref3.dataBindAttr,\n      dataBindAttr = _ref3$dataBindAttr === void 0 ? '__data' : _ref3$dataBindAttr,\n      idAccessor = _ref3.idAccessor,\n      _ref3$purge = _ref3.purge,\n      purge = _ref3$purge === void 0 ? false : _ref3$purge;\n\n  var isObjValid = function isObjValid(obj) {\n    return obj.hasOwnProperty(dataBindAttr);\n  };\n\n  var removeObjs = existingObjs.filter(function (obj) {\n    return !isObjValid(obj);\n  });\n  var prevD = existingObjs.filter(isObjValid).map(function (obj) {\n    return obj[dataBindAttr];\n  });\n  var nextD = data;\n  var diff = purge ? {\n    enter: nextD,\n    exit: prevD,\n    update: []\n  } // don't diff data in purge mode\n  : diffArrays(prevD, nextD, idAccessor);\n  diff.update = diff.update.map(function (_ref4) {\n    var _ref5 = _slicedToArray(_ref4, 2),\n        prevD = _ref5[0],\n        nextD = _ref5[1];\n\n    if (prevD !== nextD) {\n      // transfer obj to new data point (if different)\n      nextD[objBindAttr] = prevD[objBindAttr];\n      nextD[objBindAttr][dataBindAttr] = nextD;\n    }\n\n    return nextD;\n  });\n  diff.exit = diff.exit.concat(removeObjs.map(function (obj) {\n    return _defineProperty({}, objBindAttr, obj);\n  }));\n  return diff;\n}\n\nfunction viewDigest(data, existingObjs, // list\nappendObj, // item => {...} function\nremoveObj, // item => {...} function\n_ref7) {\n  var _ref7$createObj = _ref7.createObj,\n      createObj = _ref7$createObj === void 0 ? function (d) {\n    return {};\n  } : _ref7$createObj,\n      _ref7$updateObj = _ref7.updateObj,\n      updateObj = _ref7$updateObj === void 0 ? function (obj, d) {} : _ref7$updateObj,\n      _ref7$exitObj = _ref7.exitObj,\n      exitObj = _ref7$exitObj === void 0 ? function (obj) {} : _ref7$exitObj,\n      _ref7$objBindAttr = _ref7.objBindAttr,\n      objBindAttr = _ref7$objBindAttr === void 0 ? '__obj' : _ref7$objBindAttr,\n      _ref7$dataBindAttr = _ref7.dataBindAttr,\n      dataBindAttr = _ref7$dataBindAttr === void 0 ? '__data' : _ref7$dataBindAttr,\n      dataDiffOptions = _objectWithoutProperties(_ref7, _excluded);\n\n  var _dataBindDiff = dataBindDiff(data, existingObjs, _objectSpread2({\n    objBindAttr: objBindAttr,\n    dataBindAttr: dataBindAttr\n  }, dataDiffOptions)),\n      enter = _dataBindDiff.enter,\n      update = _dataBindDiff.update,\n      exit = _dataBindDiff.exit; // Remove exiting points\n\n\n  exit.forEach(function (d) {\n    var obj = d[objBindAttr];\n    delete d[objBindAttr]; // unbind obj\n\n    exitObj(obj);\n    removeObj(obj);\n  });\n  var newObjs = createObjs(enter);\n  var pointsData = [].concat(_toConsumableArray(enter), _toConsumableArray(update));\n  updateObjs(pointsData); // Add new points\n\n  newObjs.forEach(appendObj); //\n\n  function createObjs(data) {\n    var newObjs = [];\n    data.forEach(function (d) {\n      var obj = createObj(d);\n\n      if (obj) {\n        obj[dataBindAttr] = d;\n        d[objBindAttr] = obj;\n        newObjs.push(obj);\n      }\n    });\n    return newObjs;\n  }\n\n  function updateObjs(data) {\n    data.forEach(function (d) {\n      var obj = d[objBindAttr];\n\n      if (obj) {\n        obj[dataBindAttr] = d;\n        updateObj(obj, d);\n      }\n    });\n  }\n}\n\nexport { viewDigest as default };","map":{"version":3,"sources":["/Users/samuelwright/Projects/portfolio/node_modules/data-joint/dist/data-joint.mjs"],"names":["indexBy","_iterableToArrayLimit","arr","i","_i","Symbol","iterator","_s","_e","_x","_r","_arr","_n","_d","call","next","Object","done","push","value","length","err","return","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","apply","_objectSpread2","target","arguments","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","obj","_toPropertyKey","configurable","writable","_objectWithoutPropertiesLoose","excluded","sourceKeys","indexOf","_objectWithoutProperties","sourceSymbolKeys","prototype","propertyIsEnumerable","_slicedToArray","_arrayWithHoles","_unsupportedIterableToArray","_nonIterableRest","_toConsumableArray","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","Array","isArray","_arrayLikeToArray","iter","from","o","minLen","n","toString","slice","constructor","name","test","len","arr2","TypeError","_toPrimitive","input","hint","prim","toPrimitive","undefined","res","String","Number","arg","_excluded","diffArrays","prev","idAccessor","result","enter","update","exit","prevSet","Set","nextSet","concat","item","type","has","prevById","nextById","byId","assign","entries","_ref","_ref2","id","hasOwnProperty","dataBindDiff","data","existingObjs","_ref3","_ref3$objBindAttr","objBindAttr","_ref3$dataBindAttr","dataBindAttr","_ref3$purge","purge","isObjValid","removeObjs","prevD","map","nextD","diff","_ref4","_ref5","viewDigest","appendObj","removeObj","_ref7","_ref7$createObj","createObj","d","_ref7$updateObj","updateObj","_ref7$exitObj","exitObj","_ref7$objBindAttr","_ref7$dataBindAttr","dataDiffOptions","_dataBindDiff","newObjs","createObjs","pointsData","updateObjs","default"],"mappings":"AAAA,OAAOA,OAAP,MAAoB,gBAApB;;AAEA,SAASC,qBAAT,CAA+BC,GAA/B,EAAoCC,CAApC,EAAuC;AACrC,MAAIC,EAAE,GAAG,QAAQF,GAAR,GAAc,IAAd,GAAqB,eAAe,OAAOG,MAAtB,IAAgCH,GAAG,CAACG,MAAM,CAACC,QAAR,CAAnC,IAAwDJ,GAAG,CAAC,YAAD,CAAzF;;AACA,MAAI,QAAQE,EAAZ,EAAgB;AACd,QAAIG,EAAJ;AAAA,QACEC,EADF;AAAA,QAEEC,EAFF;AAAA,QAGEC,EAHF;AAAA,QAIEC,IAAI,GAAG,EAJT;AAAA,QAKEC,EAAE,GAAG,CAAC,CALR;AAAA,QAMEC,EAAE,GAAG,CAAC,CANR;;AAOA,QAAI;AACF,UAAIJ,EAAE,GAAG,CAACL,EAAE,GAAGA,EAAE,CAACU,IAAH,CAAQZ,GAAR,CAAN,EAAoBa,IAAzB,EAA+B,MAAMZ,CAAzC,EAA4C;AAC1C,YAAIa,MAAM,CAACZ,EAAD,CAAN,KAAeA,EAAnB,EAAuB;AACvBQ,QAAAA,EAAE,GAAG,CAAC,CAAN;AACD,OAHD,MAGO,OAAO,EAAEA,EAAE,GAAG,CAACL,EAAE,GAAGE,EAAE,CAACK,IAAH,CAAQV,EAAR,CAAN,EAAmBa,IAA1B,MAAoCN,IAAI,CAACO,IAAL,CAAUX,EAAE,CAACY,KAAb,GAAqBR,IAAI,CAACS,MAAL,KAAgBjB,CAAzE,CAAP,EAAoFS,EAAE,GAAG,CAAC,CAA1F,CAA4F;AACpG,KALD,CAKE,OAAOS,GAAP,EAAY;AACZR,MAAAA,EAAE,GAAG,CAAC,CAAN,EAASL,EAAE,GAAGa,GAAd;AACD,KAPD,SAOU;AACR,UAAI;AACF,YAAI,CAACT,EAAD,IAAO,QAAQR,EAAE,CAACkB,MAAlB,KAA6BZ,EAAE,GAAGN,EAAE,CAACkB,MAAH,EAAL,EAAkBN,MAAM,CAACN,EAAD,CAAN,KAAeA,EAA9D,CAAJ,EAAuE;AACxE,OAFD,SAEU;AACR,YAAIG,EAAJ,EAAQ,MAAML,EAAN;AACT;AACF;;AACD,WAAOG,IAAP;AACD;AACF;;AACD,SAASY,OAAT,CAAiBC,MAAjB,EAAyBC,cAAzB,EAAyC;AACvC,MAAIC,IAAI,GAAGV,MAAM,CAACU,IAAP,CAAYF,MAAZ,CAAX;;AACA,MAAIR,MAAM,CAACW,qBAAX,EAAkC;AAChC,QAAIC,OAAO,GAAGZ,MAAM,CAACW,qBAAP,CAA6BH,MAA7B,CAAd;AACAC,IAAAA,cAAc,KAAKG,OAAO,GAAGA,OAAO,CAACC,MAAR,CAAe,UAAUC,GAAV,EAAe;AACzD,aAAOd,MAAM,CAACe,wBAAP,CAAgCP,MAAhC,EAAwCM,GAAxC,EAA6CE,UAApD;AACD,KAF4B,CAAf,CAAd,EAEKN,IAAI,CAACR,IAAL,CAAUe,KAAV,CAAgBP,IAAhB,EAAsBE,OAAtB,CAFL;AAGD;;AACD,SAAOF,IAAP;AACD;;AACD,SAASQ,cAAT,CAAwBC,MAAxB,EAAgC;AAC9B,OAAK,IAAIhC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGiC,SAAS,CAAChB,MAA9B,EAAsCjB,CAAC,EAAvC,EAA2C;AACzC,QAAIkC,MAAM,GAAG,QAAQD,SAAS,CAACjC,CAAD,CAAjB,GAAuBiC,SAAS,CAACjC,CAAD,CAAhC,GAAsC,EAAnD;AACAA,IAAAA,CAAC,GAAG,CAAJ,GAAQoB,OAAO,CAACP,MAAM,CAACqB,MAAD,CAAP,EAAiB,CAAC,CAAlB,CAAP,CAA4BC,OAA5B,CAAoC,UAAUC,GAAV,EAAe;AACzDC,MAAAA,eAAe,CAACL,MAAD,EAASI,GAAT,EAAcF,MAAM,CAACE,GAAD,CAApB,CAAf;AACD,KAFO,CAAR,GAEKvB,MAAM,CAACyB,yBAAP,GAAmCzB,MAAM,CAAC0B,gBAAP,CAAwBP,MAAxB,EAAgCnB,MAAM,CAACyB,yBAAP,CAAiCJ,MAAjC,CAAhC,CAAnC,GAA+Gd,OAAO,CAACP,MAAM,CAACqB,MAAD,CAAP,CAAP,CAAwBC,OAAxB,CAAgC,UAAUC,GAAV,EAAe;AACjKvB,MAAAA,MAAM,CAAC2B,cAAP,CAAsBR,MAAtB,EAA8BI,GAA9B,EAAmCvB,MAAM,CAACe,wBAAP,CAAgCM,MAAhC,EAAwCE,GAAxC,CAAnC;AACD,KAFmH,CAFpH;AAKD;;AACD,SAAOJ,MAAP;AACD;;AACD,SAASK,eAAT,CAAyBI,GAAzB,EAA8BL,GAA9B,EAAmCpB,KAAnC,EAA0C;AACxCoB,EAAAA,GAAG,GAAGM,cAAc,CAACN,GAAD,CAApB;;AACA,MAAIA,GAAG,IAAIK,GAAX,EAAgB;AACd5B,IAAAA,MAAM,CAAC2B,cAAP,CAAsBC,GAAtB,EAA2BL,GAA3B,EAAgC;AAC9BpB,MAAAA,KAAK,EAAEA,KADuB;AAE9Ba,MAAAA,UAAU,EAAE,IAFkB;AAG9Bc,MAAAA,YAAY,EAAE,IAHgB;AAI9BC,MAAAA,QAAQ,EAAE;AAJoB,KAAhC;AAMD,GAPD,MAOO;AACLH,IAAAA,GAAG,CAACL,GAAD,CAAH,GAAWpB,KAAX;AACD;;AACD,SAAOyB,GAAP;AACD;;AACD,SAASI,6BAAT,CAAuCX,MAAvC,EAA+CY,QAA/C,EAAyD;AACvD,MAAIZ,MAAM,IAAI,IAAd,EAAoB,OAAO,EAAP;AACpB,MAAIF,MAAM,GAAG,EAAb;AACA,MAAIe,UAAU,GAAGlC,MAAM,CAACU,IAAP,CAAYW,MAAZ,CAAjB;AACA,MAAIE,GAAJ,EAASpC,CAAT;;AACA,OAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG+C,UAAU,CAAC9B,MAA3B,EAAmCjB,CAAC,EAApC,EAAwC;AACtCoC,IAAAA,GAAG,GAAGW,UAAU,CAAC/C,CAAD,CAAhB;AACA,QAAI8C,QAAQ,CAACE,OAAT,CAAiBZ,GAAjB,KAAyB,CAA7B,EAAgC;AAChCJ,IAAAA,MAAM,CAACI,GAAD,CAAN,GAAcF,MAAM,CAACE,GAAD,CAApB;AACD;;AACD,SAAOJ,MAAP;AACD;;AACD,SAASiB,wBAAT,CAAkCf,MAAlC,EAA0CY,QAA1C,EAAoD;AAClD,MAAIZ,MAAM,IAAI,IAAd,EAAoB,OAAO,EAAP;;AACpB,MAAIF,MAAM,GAAGa,6BAA6B,CAACX,MAAD,EAASY,QAAT,CAA1C;;AACA,MAAIV,GAAJ,EAASpC,CAAT;;AACA,MAAIa,MAAM,CAACW,qBAAX,EAAkC;AAChC,QAAI0B,gBAAgB,GAAGrC,MAAM,CAACW,qBAAP,CAA6BU,MAA7B,CAAvB;;AACA,SAAKlC,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGkD,gBAAgB,CAACjC,MAAjC,EAAyCjB,CAAC,EAA1C,EAA8C;AAC5CoC,MAAAA,GAAG,GAAGc,gBAAgB,CAAClD,CAAD,CAAtB;AACA,UAAI8C,QAAQ,CAACE,OAAT,CAAiBZ,GAAjB,KAAyB,CAA7B,EAAgC;AAChC,UAAI,CAACvB,MAAM,CAACsC,SAAP,CAAiBC,oBAAjB,CAAsCzC,IAAtC,CAA2CuB,MAA3C,EAAmDE,GAAnD,CAAL,EAA8D;AAC9DJ,MAAAA,MAAM,CAACI,GAAD,CAAN,GAAcF,MAAM,CAACE,GAAD,CAApB;AACD;AACF;;AACD,SAAOJ,MAAP;AACD;;AACD,SAASqB,cAAT,CAAwBtD,GAAxB,EAA6BC,CAA7B,EAAgC;AAC9B,SAAOsD,eAAe,CAACvD,GAAD,CAAf,IAAwBD,qBAAqB,CAACC,GAAD,EAAMC,CAAN,CAA7C,IAAyDuD,2BAA2B,CAACxD,GAAD,EAAMC,CAAN,CAApF,IAAgGwD,gBAAgB,EAAvH;AACD;;AACD,SAASC,kBAAT,CAA4B1D,GAA5B,EAAiC;AAC/B,SAAO2D,kBAAkB,CAAC3D,GAAD,CAAlB,IAA2B4D,gBAAgB,CAAC5D,GAAD,CAA3C,IAAoDwD,2BAA2B,CAACxD,GAAD,CAA/E,IAAwF6D,kBAAkB,EAAjH;AACD;;AACD,SAASF,kBAAT,CAA4B3D,GAA5B,EAAiC;AAC/B,MAAI8D,KAAK,CAACC,OAAN,CAAc/D,GAAd,CAAJ,EAAwB,OAAOgE,iBAAiB,CAAChE,GAAD,CAAxB;AACzB;;AACD,SAASuD,eAAT,CAAyBvD,GAAzB,EAA8B;AAC5B,MAAI8D,KAAK,CAACC,OAAN,CAAc/D,GAAd,CAAJ,EAAwB,OAAOA,GAAP;AACzB;;AACD,SAAS4D,gBAAT,CAA0BK,IAA1B,EAAgC;AAC9B,MAAI,OAAO9D,MAAP,KAAkB,WAAlB,IAAiC8D,IAAI,CAAC9D,MAAM,CAACC,QAAR,CAAJ,IAAyB,IAA1D,IAAkE6D,IAAI,CAAC,YAAD,CAAJ,IAAsB,IAA5F,EAAkG,OAAOH,KAAK,CAACI,IAAN,CAAWD,IAAX,CAAP;AACnG;;AACD,SAAST,2BAAT,CAAqCW,CAArC,EAAwCC,MAAxC,EAAgD;AAC9C,MAAI,CAACD,CAAL,EAAQ;AACR,MAAI,OAAOA,CAAP,KAAa,QAAjB,EAA2B,OAAOH,iBAAiB,CAACG,CAAD,EAAIC,MAAJ,CAAxB;AAC3B,MAAIC,CAAC,GAAGvD,MAAM,CAACsC,SAAP,CAAiBkB,QAAjB,CAA0B1D,IAA1B,CAA+BuD,CAA/B,EAAkCI,KAAlC,CAAwC,CAAxC,EAA2C,CAAC,CAA5C,CAAR;AACA,MAAIF,CAAC,KAAK,QAAN,IAAkBF,CAAC,CAACK,WAAxB,EAAqCH,CAAC,GAAGF,CAAC,CAACK,WAAF,CAAcC,IAAlB;AACrC,MAAIJ,CAAC,KAAK,KAAN,IAAeA,CAAC,KAAK,KAAzB,EAAgC,OAAOP,KAAK,CAACI,IAAN,CAAWC,CAAX,CAAP;AAChC,MAAIE,CAAC,KAAK,WAAN,IAAqB,2CAA2CK,IAA3C,CAAgDL,CAAhD,CAAzB,EAA6E,OAAOL,iBAAiB,CAACG,CAAD,EAAIC,MAAJ,CAAxB;AAC9E;;AACD,SAASJ,iBAAT,CAA2BhE,GAA3B,EAAgC2E,GAAhC,EAAqC;AACnC,MAAIA,GAAG,IAAI,IAAP,IAAeA,GAAG,GAAG3E,GAAG,CAACkB,MAA7B,EAAqCyD,GAAG,GAAG3E,GAAG,CAACkB,MAAV;;AACrC,OAAK,IAAIjB,CAAC,GAAG,CAAR,EAAW2E,IAAI,GAAG,IAAId,KAAJ,CAAUa,GAAV,CAAvB,EAAuC1E,CAAC,GAAG0E,GAA3C,EAAgD1E,CAAC,EAAjD,EAAqD2E,IAAI,CAAC3E,CAAD,CAAJ,GAAUD,GAAG,CAACC,CAAD,CAAb;;AACrD,SAAO2E,IAAP;AACD;;AACD,SAASf,kBAAT,GAA8B;AAC5B,QAAM,IAAIgB,SAAJ,CAAc,sIAAd,CAAN;AACD;;AACD,SAASpB,gBAAT,GAA4B;AAC1B,QAAM,IAAIoB,SAAJ,CAAc,2IAAd,CAAN;AACD;;AACD,SAASC,YAAT,CAAsBC,KAAtB,EAA6BC,IAA7B,EAAmC;AACjC,MAAI,OAAOD,KAAP,KAAiB,QAAjB,IAA6BA,KAAK,KAAK,IAA3C,EAAiD,OAAOA,KAAP;AACjD,MAAIE,IAAI,GAAGF,KAAK,CAAC5E,MAAM,CAAC+E,WAAR,CAAhB;;AACA,MAAID,IAAI,KAAKE,SAAb,EAAwB;AACtB,QAAIC,GAAG,GAAGH,IAAI,CAACrE,IAAL,CAAUmE,KAAV,EAAiBC,IAAI,IAAI,SAAzB,CAAV;AACA,QAAI,OAAOI,GAAP,KAAe,QAAnB,EAA6B,OAAOA,GAAP;AAC7B,UAAM,IAAIP,SAAJ,CAAc,8CAAd,CAAN;AACD;;AACD,SAAO,CAACG,IAAI,KAAK,QAAT,GAAoBK,MAApB,GAA6BC,MAA9B,EAAsCP,KAAtC,CAAP;AACD;;AACD,SAASpC,cAAT,CAAwB4C,GAAxB,EAA6B;AAC3B,MAAIlD,GAAG,GAAGyC,YAAY,CAACS,GAAD,EAAM,QAAN,CAAtB;;AACA,SAAO,OAAOlD,GAAP,KAAe,QAAf,GAA0BA,GAA1B,GAAgCgD,MAAM,CAAChD,GAAD,CAA7C;AACD;;AAED,IAAImD,SAAS,GAAG,CAAC,WAAD,EAAc,WAAd,EAA2B,SAA3B,EAAsC,aAAtC,EAAqD,cAArD,CAAhB;;AACA,SAASC,UAAT,CAAoBC,IAApB,EAA0B7E,IAA1B,EAAgC8E,UAAhC,EAA4C;AAC1C,MAAIC,MAAM,GAAG;AACXC,IAAAA,KAAK,EAAE,EADI;AAEXC,IAAAA,MAAM,EAAE,EAFG;AAGXC,IAAAA,IAAI,EAAE;AAHK,GAAb;;AAKA,MAAI,CAACJ,UAAL,EAAiB;AACf;AACA,QAAIK,OAAO,GAAG,IAAIC,GAAJ,CAAQP,IAAR,CAAd;AACA,QAAIQ,OAAO,GAAG,IAAID,GAAJ,CAAQpF,IAAR,CAAd;AACA,QAAIoF,GAAJ,CAAQ,GAAGE,MAAH,CAAUzC,kBAAkB,CAACsC,OAAD,CAA5B,EAAuCtC,kBAAkB,CAACwC,OAAD,CAAzD,CAAR,EAA6E9D,OAA7E,CAAqF,UAAUgE,IAAV,EAAgB;AACnG,UAAIC,IAAI,GAAG,CAACL,OAAO,CAACM,GAAR,CAAYF,IAAZ,CAAD,GAAqB,OAArB,GAA+B,CAACF,OAAO,CAACI,GAAR,CAAYF,IAAZ,CAAD,GAAqB,MAArB,GAA8B,QAAxE;AACAR,MAAAA,MAAM,CAACS,IAAD,CAAN,CAAarF,IAAb,CAAkBqF,IAAI,KAAK,QAAT,GAAoB,CAACD,IAAD,EAAOA,IAAP,CAApB,GAAmCA,IAArD;AACD,KAHD;AAID,GARD,MAQO;AACL;AACA,QAAIG,QAAQ,GAAGzG,OAAO,CAAC4F,IAAD,EAAOC,UAAP,EAAmB,KAAnB,CAAtB;AACA,QAAIa,QAAQ,GAAG1G,OAAO,CAACe,IAAD,EAAO8E,UAAP,EAAmB,KAAnB,CAAtB;AACA,QAAIc,IAAI,GAAG3F,MAAM,CAAC4F,MAAP,CAAc,EAAd,EAAkBH,QAAlB,EAA4BC,QAA5B,CAAX;AACA1F,IAAAA,MAAM,CAAC6F,OAAP,CAAeF,IAAf,EAAqBrE,OAArB,CAA6B,UAAUwE,IAAV,EAAgB;AAC3C,UAAIC,KAAK,GAAGvD,cAAc,CAACsD,IAAD,EAAO,CAAP,CAA1B;AAAA,UACEE,EAAE,GAAGD,KAAK,CAAC,CAAD,CADZ;AAAA,UAEET,IAAI,GAAGS,KAAK,CAAC,CAAD,CAFd;;AAGA,UAAIR,IAAI,GAAG,CAACE,QAAQ,CAACQ,cAAT,CAAwBD,EAAxB,CAAD,GAA+B,OAA/B,GAAyC,CAACN,QAAQ,CAACO,cAAT,CAAwBD,EAAxB,CAAD,GAA+B,MAA/B,GAAwC,QAA5F;AACAlB,MAAAA,MAAM,CAACS,IAAD,CAAN,CAAarF,IAAb,CAAkBqF,IAAI,KAAK,QAAT,GAAoB,CAACE,QAAQ,CAACO,EAAD,CAAT,EAAeN,QAAQ,CAACM,EAAD,CAAvB,CAApB,GAAmDV,IAArE;AACD,KAND;AAOD;;AACD,SAAOR,MAAP;AACD;;AACD,SAASoB,YAAT,CAAsBC,IAAtB,EAA4BC,YAA5B,EAA0CC,KAA1C,EAAiD;AAC/C,MAAIC,iBAAiB,GAAGD,KAAK,CAACE,WAA9B;AAAA,MACEA,WAAW,GAAGD,iBAAiB,KAAK,KAAK,CAA3B,GAA+B,OAA/B,GAAyCA,iBADzD;AAAA,MAEEE,kBAAkB,GAAGH,KAAK,CAACI,YAF7B;AAAA,MAGEA,YAAY,GAAGD,kBAAkB,KAAK,KAAK,CAA5B,GAAgC,QAAhC,GAA2CA,kBAH5D;AAAA,MAIE3B,UAAU,GAAGwB,KAAK,CAACxB,UAJrB;AAAA,MAKE6B,WAAW,GAAGL,KAAK,CAACM,KALtB;AAAA,MAMEA,KAAK,GAAGD,WAAW,KAAK,KAAK,CAArB,GAAyB,KAAzB,GAAiCA,WAN3C;;AAOA,MAAIE,UAAU,GAAG,SAASA,UAAT,CAAoBhF,GAApB,EAAyB;AACxC,WAAOA,GAAG,CAACqE,cAAJ,CAAmBQ,YAAnB,CAAP;AACD,GAFD;;AAGA,MAAII,UAAU,GAAGT,YAAY,CAACvF,MAAb,CAAoB,UAAUe,GAAV,EAAe;AAClD,WAAO,CAACgF,UAAU,CAAChF,GAAD,CAAlB;AACD,GAFgB,CAAjB;AAGA,MAAIkF,KAAK,GAAGV,YAAY,CAACvF,MAAb,CAAoB+F,UAApB,EAAgCG,GAAhC,CAAoC,UAAUnF,GAAV,EAAe;AAC7D,WAAOA,GAAG,CAAC6E,YAAD,CAAV;AACD,GAFW,CAAZ;AAGA,MAAIO,KAAK,GAAGb,IAAZ;AACA,MAAIc,IAAI,GAAGN,KAAK,GAAG;AACjB5B,IAAAA,KAAK,EAAEiC,KADU;AAEjB/B,IAAAA,IAAI,EAAE6B,KAFW;AAGjB9B,IAAAA,MAAM,EAAE;AAHS,GAAH,CAId;AAJc,IAKdL,UAAU,CAACmC,KAAD,EAAQE,KAAR,EAAenC,UAAf,CALZ;AAMAoC,EAAAA,IAAI,CAACjC,MAAL,GAAciC,IAAI,CAACjC,MAAL,CAAY+B,GAAZ,CAAgB,UAAUG,KAAV,EAAiB;AAC7C,QAAIC,KAAK,GAAG3E,cAAc,CAAC0E,KAAD,EAAQ,CAAR,CAA1B;AAAA,QACEJ,KAAK,GAAGK,KAAK,CAAC,CAAD,CADf;AAAA,QAEEH,KAAK,GAAGG,KAAK,CAAC,CAAD,CAFf;;AAGA,QAAIL,KAAK,KAAKE,KAAd,EAAqB;AACnB;AACAA,MAAAA,KAAK,CAACT,WAAD,CAAL,GAAqBO,KAAK,CAACP,WAAD,CAA1B;AACAS,MAAAA,KAAK,CAACT,WAAD,CAAL,CAAmBE,YAAnB,IAAmCO,KAAnC;AACD;;AACD,WAAOA,KAAP;AACD,GAVa,CAAd;AAWAC,EAAAA,IAAI,CAAChC,IAAL,GAAYgC,IAAI,CAAChC,IAAL,CAAUI,MAAV,CAAiBwB,UAAU,CAACE,GAAX,CAAe,UAAUnF,GAAV,EAAe;AACzD,WAAOJ,eAAe,CAAC,EAAD,EAAK+E,WAAL,EAAkB3E,GAAlB,CAAtB;AACD,GAF4B,CAAjB,CAAZ;AAGA,SAAOqF,IAAP;AACD;;AACD,SAASG,UAAT,CAAoBjB,IAApB,EAA0BC,YAA1B,EACA;AACAiB,SAFA,EAGA;AACAC,SAJA,EAIW;AACXC,KALA,EAKO;AACL,MAAIC,eAAe,GAAGD,KAAK,CAACE,SAA5B;AAAA,MACEA,SAAS,GAAGD,eAAe,KAAK,KAAK,CAAzB,GAA6B,UAAUE,CAAV,EAAa;AACpD,WAAO,EAAP;AACD,GAFW,GAERF,eAHN;AAAA,MAIEG,eAAe,GAAGJ,KAAK,CAACK,SAJ1B;AAAA,MAKEA,SAAS,GAAGD,eAAe,KAAK,KAAK,CAAzB,GAA6B,UAAU/F,GAAV,EAAe8F,CAAf,EAAkB,CAAE,CAAjD,GAAoDC,eALlE;AAAA,MAMEE,aAAa,GAAGN,KAAK,CAACO,OANxB;AAAA,MAOEA,OAAO,GAAGD,aAAa,KAAK,KAAK,CAAvB,GAA2B,UAAUjG,GAAV,EAAe,CAAE,CAA5C,GAA+CiG,aAP3D;AAAA,MAQEE,iBAAiB,GAAGR,KAAK,CAAChB,WAR5B;AAAA,MASEA,WAAW,GAAGwB,iBAAiB,KAAK,KAAK,CAA3B,GAA+B,OAA/B,GAAyCA,iBATzD;AAAA,MAUEC,kBAAkB,GAAGT,KAAK,CAACd,YAV7B;AAAA,MAWEA,YAAY,GAAGuB,kBAAkB,KAAK,KAAK,CAA5B,GAAgC,QAAhC,GAA2CA,kBAX5D;AAAA,MAYEC,eAAe,GAAG7F,wBAAwB,CAACmF,KAAD,EAAQ7C,SAAR,CAZ5C;;AAaA,MAAIwD,aAAa,GAAGhC,YAAY,CAACC,IAAD,EAAOC,YAAP,EAAqBlF,cAAc,CAAC;AAChEqF,IAAAA,WAAW,EAAEA,WADmD;AAEhEE,IAAAA,YAAY,EAAEA;AAFkD,GAAD,EAG9DwB,eAH8D,CAAnC,CAAhC;AAAA,MAIElD,KAAK,GAAGmD,aAAa,CAACnD,KAJxB;AAAA,MAKEC,MAAM,GAAGkD,aAAa,CAAClD,MALzB;AAAA,MAMEC,IAAI,GAAGiD,aAAa,CAACjD,IANvB,CAdK,CAsBL;;;AACAA,EAAAA,IAAI,CAAC3D,OAAL,CAAa,UAAUoG,CAAV,EAAa;AACxB,QAAI9F,GAAG,GAAG8F,CAAC,CAACnB,WAAD,CAAX;AACA,WAAOmB,CAAC,CAACnB,WAAD,CAAR,CAFwB,CAED;;AAEvBuB,IAAAA,OAAO,CAAClG,GAAD,CAAP;AACA0F,IAAAA,SAAS,CAAC1F,GAAD,CAAT;AACD,GAND;AAOA,MAAIuG,OAAO,GAAGC,UAAU,CAACrD,KAAD,CAAxB;AACA,MAAIsD,UAAU,GAAG,GAAGhD,MAAH,CAAUzC,kBAAkB,CAACmC,KAAD,CAA5B,EAAqCnC,kBAAkB,CAACoC,MAAD,CAAvD,CAAjB;AACAsD,EAAAA,UAAU,CAACD,UAAD,CAAV,CAhCK,CAkCL;;AACAF,EAAAA,OAAO,CAAC7G,OAAR,CAAgB+F,SAAhB,EAnCK,CAqCL;;AAEA,WAASe,UAAT,CAAoBjC,IAApB,EAA0B;AACxB,QAAIgC,OAAO,GAAG,EAAd;AACAhC,IAAAA,IAAI,CAAC7E,OAAL,CAAa,UAAUoG,CAAV,EAAa;AACxB,UAAI9F,GAAG,GAAG6F,SAAS,CAACC,CAAD,CAAnB;;AACA,UAAI9F,GAAJ,EAAS;AACPA,QAAAA,GAAG,CAAC6E,YAAD,CAAH,GAAoBiB,CAApB;AACAA,QAAAA,CAAC,CAACnB,WAAD,CAAD,GAAiB3E,GAAjB;AACAuG,QAAAA,OAAO,CAACjI,IAAR,CAAa0B,GAAb;AACD;AACF,KAPD;AAQA,WAAOuG,OAAP;AACD;;AACD,WAASG,UAAT,CAAoBnC,IAApB,EAA0B;AACxBA,IAAAA,IAAI,CAAC7E,OAAL,CAAa,UAAUoG,CAAV,EAAa;AACxB,UAAI9F,GAAG,GAAG8F,CAAC,CAACnB,WAAD,CAAX;;AACA,UAAI3E,GAAJ,EAAS;AACPA,QAAAA,GAAG,CAAC6E,YAAD,CAAH,GAAoBiB,CAApB;AACAE,QAAAA,SAAS,CAAChG,GAAD,EAAM8F,CAAN,CAAT;AACD;AACF,KAND;AAOD;AACF;;AAED,SAASN,UAAU,IAAImB,OAAvB","sourcesContent":["import indexBy from 'index-array-by';\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _i = null == arr ? null : \"undefined\" != typeof Symbol && arr[Symbol.iterator] || arr[\"@@iterator\"];\n  if (null != _i) {\n    var _s,\n      _e,\n      _x,\n      _r,\n      _arr = [],\n      _n = !0,\n      _d = !1;\n    try {\n      if (_x = (_i = _i.call(arr)).next, 0 === i) {\n        if (Object(_i) !== _i) return;\n        _n = !1;\n      } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0);\n    } catch (err) {\n      _d = !0, _e = err;\n    } finally {\n      try {\n        if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r)) return;\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n    return _arr;\n  }\n}\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n  return target;\n}\nfunction _defineProperty(obj, key, value) {\n  key = _toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n  return target;\n}\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _toPrimitive(input, hint) {\n  if (typeof input !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (typeof res !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n  return typeof key === \"symbol\" ? key : String(key);\n}\n\nvar _excluded = [\"createObj\", \"updateObj\", \"exitObj\", \"objBindAttr\", \"dataBindAttr\"];\nfunction diffArrays(prev, next, idAccessor) {\n  var result = {\n    enter: [],\n    update: [],\n    exit: []\n  };\n  if (!idAccessor) {\n    // use object references for comparison\n    var prevSet = new Set(prev);\n    var nextSet = new Set(next);\n    new Set([].concat(_toConsumableArray(prevSet), _toConsumableArray(nextSet))).forEach(function (item) {\n      var type = !prevSet.has(item) ? 'enter' : !nextSet.has(item) ? 'exit' : 'update';\n      result[type].push(type === 'update' ? [item, item] : item);\n    });\n  } else {\n    // compare by id (duplicate keys are ignored)\n    var prevById = indexBy(prev, idAccessor, false);\n    var nextById = indexBy(next, idAccessor, false);\n    var byId = Object.assign({}, prevById, nextById);\n    Object.entries(byId).forEach(function (_ref) {\n      var _ref2 = _slicedToArray(_ref, 2),\n        id = _ref2[0],\n        item = _ref2[1];\n      var type = !prevById.hasOwnProperty(id) ? 'enter' : !nextById.hasOwnProperty(id) ? 'exit' : 'update';\n      result[type].push(type === 'update' ? [prevById[id], nextById[id]] : item);\n    });\n  }\n  return result;\n}\nfunction dataBindDiff(data, existingObjs, _ref3) {\n  var _ref3$objBindAttr = _ref3.objBindAttr,\n    objBindAttr = _ref3$objBindAttr === void 0 ? '__obj' : _ref3$objBindAttr,\n    _ref3$dataBindAttr = _ref3.dataBindAttr,\n    dataBindAttr = _ref3$dataBindAttr === void 0 ? '__data' : _ref3$dataBindAttr,\n    idAccessor = _ref3.idAccessor,\n    _ref3$purge = _ref3.purge,\n    purge = _ref3$purge === void 0 ? false : _ref3$purge;\n  var isObjValid = function isObjValid(obj) {\n    return obj.hasOwnProperty(dataBindAttr);\n  };\n  var removeObjs = existingObjs.filter(function (obj) {\n    return !isObjValid(obj);\n  });\n  var prevD = existingObjs.filter(isObjValid).map(function (obj) {\n    return obj[dataBindAttr];\n  });\n  var nextD = data;\n  var diff = purge ? {\n    enter: nextD,\n    exit: prevD,\n    update: []\n  } // don't diff data in purge mode\n  : diffArrays(prevD, nextD, idAccessor);\n  diff.update = diff.update.map(function (_ref4) {\n    var _ref5 = _slicedToArray(_ref4, 2),\n      prevD = _ref5[0],\n      nextD = _ref5[1];\n    if (prevD !== nextD) {\n      // transfer obj to new data point (if different)\n      nextD[objBindAttr] = prevD[objBindAttr];\n      nextD[objBindAttr][dataBindAttr] = nextD;\n    }\n    return nextD;\n  });\n  diff.exit = diff.exit.concat(removeObjs.map(function (obj) {\n    return _defineProperty({}, objBindAttr, obj);\n  }));\n  return diff;\n}\nfunction viewDigest(data, existingObjs,\n// list\nappendObj,\n// item => {...} function\nremoveObj, // item => {...} function\n_ref7) {\n  var _ref7$createObj = _ref7.createObj,\n    createObj = _ref7$createObj === void 0 ? function (d) {\n      return {};\n    } : _ref7$createObj,\n    _ref7$updateObj = _ref7.updateObj,\n    updateObj = _ref7$updateObj === void 0 ? function (obj, d) {} : _ref7$updateObj,\n    _ref7$exitObj = _ref7.exitObj,\n    exitObj = _ref7$exitObj === void 0 ? function (obj) {} : _ref7$exitObj,\n    _ref7$objBindAttr = _ref7.objBindAttr,\n    objBindAttr = _ref7$objBindAttr === void 0 ? '__obj' : _ref7$objBindAttr,\n    _ref7$dataBindAttr = _ref7.dataBindAttr,\n    dataBindAttr = _ref7$dataBindAttr === void 0 ? '__data' : _ref7$dataBindAttr,\n    dataDiffOptions = _objectWithoutProperties(_ref7, _excluded);\n  var _dataBindDiff = dataBindDiff(data, existingObjs, _objectSpread2({\n      objBindAttr: objBindAttr,\n      dataBindAttr: dataBindAttr\n    }, dataDiffOptions)),\n    enter = _dataBindDiff.enter,\n    update = _dataBindDiff.update,\n    exit = _dataBindDiff.exit;\n\n  // Remove exiting points\n  exit.forEach(function (d) {\n    var obj = d[objBindAttr];\n    delete d[objBindAttr]; // unbind obj\n\n    exitObj(obj);\n    removeObj(obj);\n  });\n  var newObjs = createObjs(enter);\n  var pointsData = [].concat(_toConsumableArray(enter), _toConsumableArray(update));\n  updateObjs(pointsData);\n\n  // Add new points\n  newObjs.forEach(appendObj);\n\n  //\n\n  function createObjs(data) {\n    var newObjs = [];\n    data.forEach(function (d) {\n      var obj = createObj(d);\n      if (obj) {\n        obj[dataBindAttr] = d;\n        d[objBindAttr] = obj;\n        newObjs.push(obj);\n      }\n    });\n    return newObjs;\n  }\n  function updateObjs(data) {\n    data.forEach(function (d) {\n      var obj = d[objBindAttr];\n      if (obj) {\n        obj[dataBindAttr] = d;\n        updateObj(obj, d);\n      }\n    });\n  }\n}\n\nexport { viewDigest as default };\n"]},"metadata":{},"sourceType":"module"}