{"ast":null,"code":"import { debounce } from 'lodash-es';\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _i = null == arr ? null : \"undefined\" != typeof Symbol && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (null != _i) {\n    var _s,\n        _e,\n        _x,\n        _r,\n        _arr = [],\n        _n = !0,\n        _d = !1;\n\n    try {\n      if (_x = (_i = _i.call(arr)).next, 0 === i) {\n        if (Object(_i) !== _i) return;\n        _n = !1;\n      } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0);\n    } catch (err) {\n      _d = !0, _e = err;\n    } finally {\n      try {\n        if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r)) return;\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n  return arr2;\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _toPrimitive(input, hint) {\n  if (typeof input !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (typeof res !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n\n  return (hint === \"string\" ? String : Number)(input);\n}\n\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n\n  return typeof key === \"symbol\" ? key : String(key);\n}\n\nvar Prop = /*#__PURE__*/_createClass(function Prop(name, _ref) {\n  var _ref$default = _ref[\"default\"],\n      defaultVal = _ref$default === void 0 ? null : _ref$default,\n      _ref$triggerUpdate = _ref.triggerUpdate,\n      triggerUpdate = _ref$triggerUpdate === void 0 ? true : _ref$triggerUpdate,\n      _ref$onChange = _ref.onChange,\n      onChange = _ref$onChange === void 0 ? function (newVal, state) {} : _ref$onChange;\n\n  _classCallCheck(this, Prop);\n\n  this.name = name;\n  this.defaultVal = defaultVal;\n  this.triggerUpdate = triggerUpdate;\n  this.onChange = onChange;\n});\n\nfunction index(_ref2) {\n  var _ref2$stateInit = _ref2.stateInit,\n      stateInit = _ref2$stateInit === void 0 ? function () {\n    return {};\n  } : _ref2$stateInit,\n      _ref2$props = _ref2.props,\n      rawProps = _ref2$props === void 0 ? {} : _ref2$props,\n      _ref2$methods = _ref2.methods,\n      methods = _ref2$methods === void 0 ? {} : _ref2$methods,\n      _ref2$aliases = _ref2.aliases,\n      aliases = _ref2$aliases === void 0 ? {} : _ref2$aliases,\n      _ref2$init = _ref2.init,\n      initFn = _ref2$init === void 0 ? function () {} : _ref2$init,\n      _ref2$update = _ref2.update,\n      updateFn = _ref2$update === void 0 ? function () {} : _ref2$update; // Parse props into Prop instances\n\n  var props = Object.keys(rawProps).map(function (propName) {\n    return new Prop(propName, rawProps[propName]);\n  });\n  return function () {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {}; // Holds component state\n\n    var state = Object.assign({}, stateInit instanceof Function ? stateInit(options) : stateInit, // Support plain objects for backwards compatibility\n    {\n      initialised: false\n    }); // keeps track of which props triggered an update\n\n    var changedProps = {}; // Component constructor\n\n    function comp(nodeElement) {\n      initStatic(nodeElement, options);\n      digest();\n      return comp;\n    }\n\n    var initStatic = function initStatic(nodeElement, options) {\n      initFn.call(comp, nodeElement, state, options);\n      state.initialised = true;\n    };\n\n    var digest = debounce(function () {\n      if (!state.initialised) {\n        return;\n      }\n\n      updateFn.call(comp, state, changedProps);\n      changedProps = {};\n    }, 1); // Getter/setter methods\n\n    props.forEach(function (prop) {\n      comp[prop.name] = getSetProp(prop);\n\n      function getSetProp(_ref3) {\n        var prop = _ref3.name,\n            _ref3$triggerUpdate = _ref3.triggerUpdate,\n            redigest = _ref3$triggerUpdate === void 0 ? false : _ref3$triggerUpdate,\n            _ref3$onChange = _ref3.onChange,\n            onChange = _ref3$onChange === void 0 ? function (newVal, state) {} : _ref3$onChange,\n            _ref3$defaultVal = _ref3.defaultVal,\n            defaultVal = _ref3$defaultVal === void 0 ? null : _ref3$defaultVal;\n        return function (_) {\n          var curVal = state[prop];\n\n          if (!arguments.length) {\n            return curVal;\n          } // Getter mode\n\n\n          var val = _ === undefined ? defaultVal : _; // pick default if value passed is undefined\n\n          state[prop] = val;\n          onChange.call(comp, val, state, curVal); // track changed props\n\n          !changedProps.hasOwnProperty(prop) && (changedProps[prop] = curVal);\n\n          if (redigest) {\n            digest();\n          }\n\n          return comp;\n        };\n      }\n    }); // Other methods\n\n    Object.keys(methods).forEach(function (methodName) {\n      comp[methodName] = function () {\n        var _methods$methodName;\n\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        return (_methods$methodName = methods[methodName]).call.apply(_methods$methodName, [comp, state].concat(args));\n      };\n    }); // Link aliases\n\n    Object.entries(aliases).forEach(function (_ref4) {\n      var _ref5 = _slicedToArray(_ref4, 2),\n          alias = _ref5[0],\n          target = _ref5[1];\n\n      return comp[alias] = comp[target];\n    }); // Reset all component props to their default value\n\n    comp.resetProps = function () {\n      props.forEach(function (prop) {\n        comp[prop.name](prop.defaultVal);\n      });\n      return comp;\n    }; //\n\n\n    comp.resetProps(); // Apply all prop defaults\n\n    state._rerender = digest; // Expose digest method\n\n    return comp;\n  };\n}\n\nexport { index as default };","map":{"version":3,"sources":["/Users/samuelwright/Projects/portfolio/node_modules/kapsule/dist/kapsule.mjs"],"names":["debounce","_iterableToArrayLimit","arr","i","_i","Symbol","iterator","_s","_e","_x","_r","_arr","_n","_d","call","next","Object","done","push","value","length","err","return","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","descriptor","enumerable","configurable","writable","defineProperty","_toPropertyKey","key","_createClass","protoProps","staticProps","prototype","_slicedToArray","_arrayWithHoles","_unsupportedIterableToArray","_nonIterableRest","Array","isArray","o","minLen","_arrayLikeToArray","n","toString","slice","constructor","name","from","test","len","arr2","_toPrimitive","input","hint","prim","toPrimitive","undefined","res","String","Number","arg","Prop","_ref","_ref$default","defaultVal","_ref$triggerUpdate","triggerUpdate","_ref$onChange","onChange","newVal","state","index","_ref2","_ref2$stateInit","stateInit","_ref2$props","rawProps","_ref2$methods","methods","_ref2$aliases","aliases","_ref2$init","init","initFn","_ref2$update","update","updateFn","keys","map","propName","options","arguments","assign","Function","initialised","changedProps","comp","nodeElement","initStatic","digest","forEach","prop","getSetProp","_ref3","_ref3$triggerUpdate","redigest","_ref3$onChange","_ref3$defaultVal","_","curVal","val","hasOwnProperty","methodName","_methods$methodName","_len","args","_key","apply","concat","entries","_ref4","_ref5","alias","resetProps","_rerender","default"],"mappings":"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","sourcesContent":["import { debounce } from 'lodash-es';\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _i = null == arr ? null : \"undefined\" != typeof Symbol && arr[Symbol.iterator] || arr[\"@@iterator\"];\n  if (null != _i) {\n    var _s,\n      _e,\n      _x,\n      _r,\n      _arr = [],\n      _n = !0,\n      _d = !1;\n    try {\n      if (_x = (_i = _i.call(arr)).next, 0 === i) {\n        if (Object(_i) !== _i) return;\n        _n = !1;\n      } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0);\n    } catch (err) {\n      _d = !0, _e = err;\n    } finally {\n      try {\n        if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r)) return;\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n    return _arr;\n  }\n}\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _toPrimitive(input, hint) {\n  if (typeof input !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (typeof res !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n  return typeof key === \"symbol\" ? key : String(key);\n}\n\nvar Prop = /*#__PURE__*/_createClass(function Prop(name, _ref) {\n  var _ref$default = _ref[\"default\"],\n    defaultVal = _ref$default === void 0 ? null : _ref$default,\n    _ref$triggerUpdate = _ref.triggerUpdate,\n    triggerUpdate = _ref$triggerUpdate === void 0 ? true : _ref$triggerUpdate,\n    _ref$onChange = _ref.onChange,\n    onChange = _ref$onChange === void 0 ? function (newVal, state) {} : _ref$onChange;\n  _classCallCheck(this, Prop);\n  this.name = name;\n  this.defaultVal = defaultVal;\n  this.triggerUpdate = triggerUpdate;\n  this.onChange = onChange;\n});\nfunction index (_ref2) {\n  var _ref2$stateInit = _ref2.stateInit,\n    stateInit = _ref2$stateInit === void 0 ? function () {\n      return {};\n    } : _ref2$stateInit,\n    _ref2$props = _ref2.props,\n    rawProps = _ref2$props === void 0 ? {} : _ref2$props,\n    _ref2$methods = _ref2.methods,\n    methods = _ref2$methods === void 0 ? {} : _ref2$methods,\n    _ref2$aliases = _ref2.aliases,\n    aliases = _ref2$aliases === void 0 ? {} : _ref2$aliases,\n    _ref2$init = _ref2.init,\n    initFn = _ref2$init === void 0 ? function () {} : _ref2$init,\n    _ref2$update = _ref2.update,\n    updateFn = _ref2$update === void 0 ? function () {} : _ref2$update;\n  // Parse props into Prop instances\n  var props = Object.keys(rawProps).map(function (propName) {\n    return new Prop(propName, rawProps[propName]);\n  });\n  return function () {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    // Holds component state\n    var state = Object.assign({}, stateInit instanceof Function ? stateInit(options) : stateInit,\n    // Support plain objects for backwards compatibility\n    {\n      initialised: false\n    });\n\n    // keeps track of which props triggered an update\n    var changedProps = {};\n\n    // Component constructor\n    function comp(nodeElement) {\n      initStatic(nodeElement, options);\n      digest();\n      return comp;\n    }\n    var initStatic = function initStatic(nodeElement, options) {\n      initFn.call(comp, nodeElement, state, options);\n      state.initialised = true;\n    };\n    var digest = debounce(function () {\n      if (!state.initialised) {\n        return;\n      }\n      updateFn.call(comp, state, changedProps);\n      changedProps = {};\n    }, 1);\n\n    // Getter/setter methods\n    props.forEach(function (prop) {\n      comp[prop.name] = getSetProp(prop);\n      function getSetProp(_ref3) {\n        var prop = _ref3.name,\n          _ref3$triggerUpdate = _ref3.triggerUpdate,\n          redigest = _ref3$triggerUpdate === void 0 ? false : _ref3$triggerUpdate,\n          _ref3$onChange = _ref3.onChange,\n          onChange = _ref3$onChange === void 0 ? function (newVal, state) {} : _ref3$onChange,\n          _ref3$defaultVal = _ref3.defaultVal,\n          defaultVal = _ref3$defaultVal === void 0 ? null : _ref3$defaultVal;\n        return function (_) {\n          var curVal = state[prop];\n          if (!arguments.length) {\n            return curVal;\n          } // Getter mode\n\n          var val = _ === undefined ? defaultVal : _; // pick default if value passed is undefined\n          state[prop] = val;\n          onChange.call(comp, val, state, curVal);\n\n          // track changed props\n          !changedProps.hasOwnProperty(prop) && (changedProps[prop] = curVal);\n          if (redigest) {\n            digest();\n          }\n          return comp;\n        };\n      }\n    });\n\n    // Other methods\n    Object.keys(methods).forEach(function (methodName) {\n      comp[methodName] = function () {\n        var _methods$methodName;\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n        return (_methods$methodName = methods[methodName]).call.apply(_methods$methodName, [comp, state].concat(args));\n      };\n    });\n\n    // Link aliases\n    Object.entries(aliases).forEach(function (_ref4) {\n      var _ref5 = _slicedToArray(_ref4, 2),\n        alias = _ref5[0],\n        target = _ref5[1];\n      return comp[alias] = comp[target];\n    });\n\n    // Reset all component props to their default value\n    comp.resetProps = function () {\n      props.forEach(function (prop) {\n        comp[prop.name](prop.defaultVal);\n      });\n      return comp;\n    };\n\n    //\n\n    comp.resetProps(); // Apply all prop defaults\n    state._rerender = digest; // Expose digest method\n\n    return comp;\n  };\n}\n\nexport { index as default };\n"]},"metadata":{},"sourceType":"module"}